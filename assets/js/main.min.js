$(document).ready(function () {
  AOS.init();
  // xử lí cấn menu
  // window.onscroll = function (e) {
  //   // print "false" if direction is down and "true" if up
  //   console.log(this.oldScroll > this.scrollY);

  //   if (this.oldScroll > this.scrollY) {
  //     this.document.querySelector(".menu_container").classList.remove("to-top");
  //   } else {
  //     this.document.querySelector(".menu_container").classList.add("to-top");
  //   }
  //   this.oldScroll = this.scrollY;
  // };

  // onclick menu ------------

  var ul = document.getElementById("list_menu");
  var liItems = ul.getElementsByTagName("li");

  for (var i = 0; i < liItems.length; i++) {
    liItems[i].onclick = function () {
      // menuItem
      var active = ul.getElementsByClassName("active");
      if (active.length > 0) {
        active[0].classList.remove("active");
      }
      this.classList.add("active");
      // active
      var activeSs = document.getElementsByClassName("active_ss");

      if (activeSs.length > 0) {
        console.log(activeSs[0]);
        activeSs[0].classList.remove("active_ss");
      }
      document.querySelector(".img_icon").src = "assets/images/img_icon.png";
      classNameOfSection = ".section_" + this.value;
      document.querySelector(classNameOfSection).classList.add("active_ss");
      // this.classList.add("active_ss");
      // location.reload();

      window.scrollTo({ top: 0 });

      AOS.refresh();
    };
  }
  document.querySelector(".img_icon").onclick = () => {
    console.log(123123);
    var activeSs = document.getElementsByClassName("active_ss");
    if (activeSs.length > 0) {
      console.log(activeSs[0]);
      activeSs[0].classList.remove("active_ss");
    }
    document.querySelector(".section_0").classList.add("active_ss");
    AOS.refresh();
    //doi mau
    document.querySelector(".img_icon").src =
      "assets/images/img_icon_active.png";
    // Ẩn cái menu đi luôn
    document.querySelector(".menu_container").classList.add("none");
    document.querySelector(".menu_container_mobile").classList.add("none");
  };

  //-------------------
  //Xử lí menu của mobile

  //start form home = 0
  var index = 1;

  //click button;

  var convertIndex = (i) => {
    trueValue = 0;
    switch (i) {
      case 1:
        trueValue = 4;
        break;
      case 2:
        trueValue = 2;
        break;
      case 3:
        trueValue = 5;
        break;
      case 4:
        trueValue = 3;
        break;
      case 5:
        trueValue = 1;
        break;
    }

    return trueValue;
  };

  let onclickButtonSlider = (number) => {
    if (number == 1) {
      if (index == 5) {
        index = 1;
      } else {
        index++;
      }
    } else {
      if (index == 1) {
        index = 5;
      } else {
        index--;
      }
    }
    var activeSs = document.getElementsByClassName("active_ss");
    if (activeSs.length > 0) {
      activeSs[0].classList.remove("active_ss");
    }
    document.querySelector(".img_icon").src = "assets/images/img_icon.png";
    classNameOfSection = ".section_" + convertIndex(index);
    document.querySelector(classNameOfSection).classList.add("active_ss");

    window.scrollTo({ top: 0 });
  };

  //add event to button swipper

  document.querySelector(".swiper-button-next").onclick = () => {
    onclickButtonSlider(1);
  };
  document.querySelector(".swiper-button-prev").onclick = () => {
    onclickButtonSlider(0);
  };

  document.querySelector(".img_icon_mobile").onclick = () => {
    console.log(123123);
    var activeSs = document.getElementsByClassName("active_ss");
    if (activeSs.length > 0) {
      console.log(activeSs[0]);
      activeSs[0].classList.remove("active_ss");
    }
    document.querySelector(".section_0").classList.add("active_ss");
    AOS.refresh();
    // Ẩn cái menu đi luôn
    document.querySelector(".menu_container").classList.add("none");
    document.querySelector(".menu_container_mobile").classList.add("none");
  };
});

// Trỏ vào button Thư Viện

var convertIndex = (i) => {
  trueValue = 0;
  switch (i) {
    case 1:
      trueValue = 4;
      break;
    case 2:
      trueValue = 2;
      break;
    case 3:
      trueValue = 5;
      break;
    case 4:
      trueValue = 3;
      break;
    case 5:
      trueValue = 1;
      break;
  }

  return trueValue;
};

bookIndex = 1;
let changeTitle = (direction) => {
  if (direction == 1) {
    if (bookIndex == 5) {
    } else {
      bookIndex++;
    }
  } else {
    if (bookIndex == 1) {
    } else {
      bookIndex--;
    }
  }
  var bookActive = document.getElementsByClassName("book_active");
  if (bookActive.length > 0) {
    bookActive[0].classList.remove("book_active");
  }
  bookTitleClassName = ".title_" + bookIndex;
  document.querySelector(bookTitleClassName).classList.add("book_active");
};

nextButton = document.querySelector("#next_page_button");
nextButton.onclick = () => {
  changeTitle(1);
};
prevButton = document.querySelector("#prev_page_button");
prevButton.onclick = () => {
  changeTitle(0);
};

// click to chuyen trang
document.querySelector("#mybook").onclick = () => {
  var activeSs = document.getElementsByClassName("active_ss");
  if (activeSs.length > 0) {
    activeSs[0].classList.remove("active_ss");
  }
  classNameOfSection = ".section_" + convertIndex(bookIndex);
  console.log(convertIndex(bookIndex));
  document.querySelector(classNameOfSection).classList.add("active_ss");
  window.scrollTo({ top: 0 });

  // set menu

  var ul = document.getElementById("list_menu");
  var liItems = ul.getElementsByTagName("li");
  var active = ul.getElementsByClassName("active");
  if (active.length > 0) {
    active[0].classList.remove("active");
  }
  for (var i = 0; i < liItems.length; i++) {
    // menuItem
    if (liItems[i].value == convertIndex(bookIndex)) {
      liItems[i].classList.add("active");
    }
  }
  //hien menu
  document.querySelector(".menu_container").classList.remove("none");
  document.querySelector(".menu_container_mobile").classList.remove("none");
};
